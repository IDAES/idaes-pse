

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1D Control Volume Class &mdash; IDAES v1.0.0</title>
  

  
  
    <link rel="shortcut icon" href="../_static/idaes-logo.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/theme_and_schema.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Utility Methods" href="util/index.html" />
    <link rel="prev" title="0D Control Volume Class" href="control_volume_0d.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> IDAES
          

          
            
            <img src="../_static/idaes-logo-100x100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standards.html">IDAES Modeling Standards</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Core Library</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#core-contents">Core Contents</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="configuration.html">IDAES Framework Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="process_block.html">Process Blocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="model_concepts.html">IDAES Modeling Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="flowsheet_model.html">Flowsheet Model Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties.html">Property Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="unit_model.html">Unit Model Class</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="control_volume.html">Control Volume Classes</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="control_volume_0d.html">0D Control Volume Class</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">1D Control Volume Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_volume.html#common-control-volume-tasks">Common Control Volume Tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_volume.html#setting-up-the-time-domain">Setting up the time domain</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_volume.html#getting-property-package-information">Getting Property Package Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_volume.html#collecting-indexing-sets-for-property-package">Collecting Indexing Sets for Property Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_volume.html#controlvolume-and-controlvolumeblockdata-classes">ControlVolume and ControlVolumeBlockData Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_volume.html#auto-construct-method">Auto-Construct Method</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="util/index.html">Utility Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#core-overview">Core Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../models/index.html">Unit Model Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../property_models/index.html">Property Model Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmf/index.html">Data Management Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../version.html">IDAES versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IDAES</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Core Library</a> &raquo;</li>
        
          <li><a href="control_volume.html">Control Volume Classes</a> &raquo;</li>
        
      <li>1D Control Volume Class</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/core/control_volume_1d.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="d-control-volume-class">
<h1><a class="toc-backref" href="#id1">1D Control Volume Class</a><a class="headerlink" href="#d-control-volume-class" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#d-control-volume-class" id="id1">1D Control Volume Class</a><ul>
<li><a class="reference internal" href="#controlvolume1dblock-equations" id="id2">ControlVolume1DBlock Equations</a></li>
</ul>
</li>
</ul>
</div>
<p>The ControlVolume1DBlock block is used for systems with one spatial dimension where material flows parallel to the spatial domain. Examples of these types of unit operations include plug flow reactors and pipes. ControlVolume1DBlock blocks are discretized along the length domain and contain one StateBlock and one ReactionBlock (if applicable) at each point in the domain (including the inlet and outlet).</p>
<span class="target" id="module-idaes.core.control_volume1d"></span><dl class="class">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlock">
<em class="property">class </em><code class="descclassname">idaes.core.control_volume1d.</code><code class="descname">ControlVolume1DBlock</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>ControlVolume1DBlock is a specialized Pyomo block for IDAES control volume
blocks discretized in one spatial direction, and contains instances of
ControlVolume1DBlockData.</p>
<p>ControlVolume1DBlock should be used for any control volume with a defined volume
and distinct inlets and outlets where there is a single spatial domain
parallel to the material flow direction. This encompases unit operations
such as plug flow reactors and pipes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>rule</strong> (<em>function</em>) – A rule function or None. Default rule calls build().</li>
<li><strong>concrete</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True, make this a toplevel model. <strong>Default</strong> - False.</li>
<li><strong>ctype</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Pyomo ctype of the block.  <strong>Default</strong> - “Block”</li>
<li><strong>default</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – <p>Default ProcessBlockData config</p>
<dl class="docutils">
<dt>Keys</dt>
<dd><dl class="first last docutils">
<dt>dynamic</dt>
<dd>Indicates whether this model will be dynamic, <strong>default</strong>
- useDefault. <strong>Valid values:</strong> { <strong>useDefault</strong> - get
flag from parent, <strong>True</strong> - set as a dynamic model,
<strong>False</strong> - set as a steady-state model}</dd>
<dt>has_holdup</dt>
<dd>Indicates whether holdup terms should be constructed or
not. Must be True if dynamic = True, <strong>default</strong> - False.
<strong>Valid values:</strong> { <strong>True</strong> - construct holdup terms,
<strong>False</strong> - do not construct holdup terms}</dd>
<dt>property_package</dt>
<dd>Property parameter object used to define property
calculations, <strong>default</strong> - useDefault. <strong>Valid values:</strong>
{ <strong>useDefault</strong> - use default package from parent model
or flowsheet, <strong>PropertyParameterObject</strong> - a
PropertyParameterBlock object.}</dd>
<dt>property_package_args</dt>
<dd>A ConfigBlock with arguments to be passed to a property
block(s) and used when constructing these, <strong>default</strong> -
None. <strong>Valid values:</strong> { see property package for
documentation.}</dd>
<dt>reaction_package</dt>
<dd>Reaction parameter object used to define reaction
calculations, <strong>default</strong> - None. <strong>Valid values:</strong> {
<strong>None</strong> - no reaction package, <strong>ReactionParameterBlock</strong>
- a ReactionParameterBlock object.}</dd>
<dt>reaction_package_args</dt>
<dd>A ConfigBlock with arguments to be passed to a reaction
block(s) and used when constructing these, <strong>default</strong> -
None. <strong>Valid values:</strong> { see reaction package for
documentation.}</dd>
<dt>auto_construct</dt>
<dd>If set to True, this argument will trigger the
auto_construct method which will attempt to construct a
set of material, energy and momentum balance equations
based on the parent unit’s config block. The parent unit
must have a config block which derives from CONFIG_Base,
<strong>default</strong> - False. <strong>Valid values:</strong> { <strong>True</strong> - use
automatic construction, <strong>False</strong> - do not use automatic
construciton.}</dd>
</dl>
</dd>
</dl>
</li>
<li><strong>initialize</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – ProcessBlockData config for individual elements. Keys
are BlockData indexes and values are dictionaries described under the
“default” argument above.</li>
<li><strong>idx_map</strong> (<em>function</em>) – Function to take the index of a BlockData element and
return the index in the initialize dict from which to read arguments.
This can be provided to overide the default behavior of matching the
BlockData index exactly to the index in initialize.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(ControlVolume1DBlock) New instance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData">
<em class="property">class </em><code class="descclassname">idaes.core.control_volume1d.</code><code class="descname">ControlVolume1DBlockData</code><span class="sig-paren">(</span><em>component</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData" title="Permalink to this definition">¶</a></dt>
<dd><p>1-Dimensional ControlVolume Class</p>
<p>This class forms the core of all 1-D IDAES models. It provides
methods to build property and reaction blocks, and add mass, energy and
momentum balances. The form of the terms used in these constraints is
specified in the chosen property package.</p>
<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_geometry">
<code class="descname">add_geometry</code><span class="sig-paren">(</span><em>length_domain=None, length_domain_set=[0.0, 1.0], flow_direction=EnumValue(&lt;pyutilib.enum.enum.Enum object&gt;, 0, 'forward')</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_geometry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_geometry" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to create spatial domain and volume Var in ControlVolume.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>-</strong> (<em>length_domain_set</em>) – domain for the ControlVolume. If not provided, a
new ContinuousSet will be created (default=None).
ContinuousSet should be normalized to run between
0 and 1.</li>
<li><strong>-</strong> – a new ContinuousSet if length_domain is not
provided (default = [0.0, 1.0]).</li>
<li><strong>- argument indicating direction of material flow</strong> (<em>flow_direction</em>) – <dl class="docutils">
<dt>relative to length domain. Valid values:</dt>
<dd><ul class="first last">
<li>FlowDirection.forward (default), flow goes
from 0 to 1.</li>
<li>FlowDirection.backward, flow goes from 1 to 0</li>
</ul>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_phase_component_balances">
<code class="descname">add_phase_component_balances</code><span class="sig-paren">(</span><em>has_rate_reactions=False</em>, <em>has_equilibrium_reactions=False</em>, <em>has_phase_equilibrium=False</em>, <em>has_mass_transfer=False</em>, <em>custom_molar_term=None</em>, <em>custom_mass_term=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_phase_component_balances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_phase_component_balances" title="Permalink to this definition">¶</a></dt>
<dd><p>This method constructs a set of 1D material balances indexed by time,
length, phase and component.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>has_rate_reactions</strong> – whether default generation terms for rate
reactions should be included in material balances</li>
<li><strong>has_equilibrium_reactions</strong> – whether generation terms should for
chemical equilibrium reactions should be included in
material balances</li>
<li><strong>has_phase_equilibrium</strong> – whether generation terms should for phase
equilibrium behaviour should be included in material
balances</li>
<li><strong>has_mass_transfer</strong> – whether generic mass transfer terms should be
included in material balances</li>
<li><strong>custom_molar_term</strong> – a Pyomo Expression representing custom terms to
be included in material balances on a molar basis.
Expression must be indexed by time, length domain, phase
list and component list</li>
<li><strong>custom_mass_term</strong> – a Pyomo Expression representing custom terms to
be included in material balances on a mass basis.
Expression must be indexed by time, length domain, phase
list and component list</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Constraint object representing material balances</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_phase_energy_balances">
<code class="descname">add_phase_energy_balances</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_phase_energy_balances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_phase_energy_balances" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for adding energy balances (including kinetic energy) indexed by
phase to the control volume.</p>
<p>See specific control volume documentation for details.</p>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_phase_enthalpy_balances">
<code class="descname">add_phase_enthalpy_balances</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_phase_enthalpy_balances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_phase_enthalpy_balances" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for adding enthalpy balances indexed by phase to
the control volume.</p>
<p>See specific control volume documentation for details.</p>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_phase_momentum_balances">
<code class="descname">add_phase_momentum_balances</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_phase_momentum_balances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_phase_momentum_balances" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for adding momentum balances indexed by phase to the control
volume.</p>
<p>See specific control volume documentation for details.</p>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_phase_pressure_balances">
<code class="descname">add_phase_pressure_balances</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_phase_pressure_balances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_phase_pressure_balances" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for adding pressure balances indexed by
phase to the control volume.</p>
<p>See specific control volume documentation for details.</p>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_reaction_blocks">
<code class="descname">add_reaction_blocks</code><span class="sig-paren">(</span><em>has_equilibrium=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_reaction_blocks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_reaction_blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>This method constructs the reaction block for the control volume.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>has_equilibrium</strong> – indicates whether equilibrium calculations
will be required in reaction block</li>
<li><strong>package_arguments</strong> – dict-like object of arguments to be passed to
reaction block as construction arguments</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_state_blocks">
<code class="descname">add_state_blocks</code><span class="sig-paren">(</span><em>information_flow=EnumValue(&lt;pyutilib.enum.enum.Enum object&gt;</em>, <em>0</em>, <em>'forward')</em>, <em>has_phase_equilibrium=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_state_blocks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_state_blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>This method constructs the state blocks for the
control volume.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>information_flow</strong> – a FlowDirection Enum indicating whether
information flows from inlet-to-outlet or
outlet-to-inlet</li>
<li><strong>has_phase_equilibrium</strong> – indicates whether equilibrium calculations
will be required in state blocks</li>
<li><strong>package_arguments</strong> – dict-like object of arguments to be passed to
state blocks as construction arguments</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_component_balances">
<code class="descname">add_total_component_balances</code><span class="sig-paren">(</span><em>has_rate_reactions=False</em>, <em>has_equilibrium_reactions=False</em>, <em>has_phase_equilibrium=False</em>, <em>has_mass_transfer=False</em>, <em>custom_molar_term=None</em>, <em>custom_mass_term=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_total_component_balances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_component_balances" title="Permalink to this definition">¶</a></dt>
<dd><p>This method constructs a set of 1D material balances indexed by time
length and component.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>has_rate_reactions</strong> – whether default generation terms for rate
reactions should be included in material balances</li>
<li><strong>has_equilibrium_reactions</strong> – whether generation terms should for
chemical equilibrium reactions should be included in
material balances</li>
<li><strong>has_phase_equilibrium</strong> – whether generation terms should for phase
equilibrium behaviour should be included in material
balances</li>
<li><strong>has_mass_transfer</strong> – whether generic mass transfer terms should be
included in material balances</li>
<li><strong>custom_molar_term</strong> – a Pyomo Expression representing custom terms to
be included in material balances on a molar basis.
Expression must be indexed by time, length domain and
component list</li>
<li><strong>custom_mass_term</strong> – a Pyomo Expression representing custom terms to
be included in material balances on a mass basis.
Expression must be indexed by time, length domain and
component list</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Constraint object representing material balances</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_element_balances">
<code class="descname">add_total_element_balances</code><span class="sig-paren">(</span><em>has_rate_reactions=False</em>, <em>has_equilibrium_reactions=False</em>, <em>has_phase_equilibrium=False</em>, <em>has_mass_transfer=False</em>, <em>custom_elemental_term=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_total_element_balances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_element_balances" title="Permalink to this definition">¶</a></dt>
<dd><p>This method constructs a set of 1D element balances indexed by time and
length.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>- whether default generation terms for rate</strong> (<em>has_rate_reactions</em>) – reactions should be included in material balances</li>
<li><strong>- whether generation terms should for</strong> (<em>has_equilibrium_reactions</em>) – chemical equilibrium reactions should be included in
material balances</li>
<li><strong>- whether generation terms should for phase</strong> (<em>has_phase_equilibrium</em>) – equilibrium behaviour should be included in material
balances</li>
<li><strong>- whether generic mass transfer terms should be</strong> (<em>has_mass_transfer</em>) – included in material balances</li>
<li><strong>- a Pyomo Expression representing custom</strong> (<em>custom_elemental_term</em>) – terms to be included in material balances on a molar
elemental basis. Expression must be indexed by time, length
and element list</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Constraint object representing material balances</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_energy_balances">
<code class="descname">add_total_energy_balances</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_total_energy_balances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_energy_balances" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for adding a total energy balance (including kinetic energy)
to the control volume.</p>
<p>See specific control volume documentation for details.</p>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_enthalpy_balances">
<code class="descname">add_total_enthalpy_balances</code><span class="sig-paren">(</span><em>has_heat_of_reaction=False</em>, <em>has_heat_transfer=False</em>, <em>has_work_transfer=False</em>, <em>custom_term=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_total_enthalpy_balances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_enthalpy_balances" title="Permalink to this definition">¶</a></dt>
<dd><p>This method constructs a set of 1D enthalpy balances indexed by time
and phase.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>- whether terms for heat of reaction should</strong> (<em>has_heat_of_reaction</em>) – be included in enthalpy balance</li>
<li><strong>- whether terms for heat transfer should be</strong> (<em>has_heat_transfer</em>) – included in enthalpy balances</li>
<li><strong>- whether terms for work transfer should be</strong> (<em>has_work_transfer</em>) – included in enthalpy balances</li>
<li><strong>- a Pyomo Expression representing custom terms to</strong> (<em>custom_term</em>) – be included in enthalpy balances.
Expression must be indexed by time, length and phase list</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Constraint object representing enthalpy balances</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_material_balances">
<code class="descname">add_total_material_balances</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_total_material_balances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_material_balances" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for adding a total material balance to
the control volume.</p>
<p>See specific control volume documentation for details.</p>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_momentum_balances">
<code class="descname">add_total_momentum_balances</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_total_momentum_balances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_momentum_balances" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for adding a total momentum balance to the control volume.</p>
<p>See specific control volume documentation for details.</p>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_pressure_balances">
<code class="descname">add_total_pressure_balances</code><span class="sig-paren">(</span><em>has_pressure_change=False</em>, <em>custom_term=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.add_total_pressure_balances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.add_total_pressure_balances" title="Permalink to this definition">¶</a></dt>
<dd><p>This method constructs a set of 1D pressure balances indexed by time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>- whether terms for pressure change should be</strong> (<em>has_pressure_change</em>) – included in enthalpy balances</li>
<li><strong>- a Pyomo Expression representing custom terms to</strong> (<em>custom_term</em>) – be included in pressure balances.
Expression must be indexed by time and length domain</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Constraint object representing pressure balances</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.apply_transformation">
<code class="descname">apply_transformation</code><span class="sig-paren">(</span><em>transformation_method='dae.finite_difference'</em>, <em>transformation_scheme='BACKWARD'</em>, <em>finite_elements=10</em>, <em>collocation_points=3</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.apply_transformation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.apply_transformation" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to apply DAE transformation to the Control Volume length domain.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>- method to use to transform domain. Must be</strong> (<em>transformation_method</em>) – a method recognised by the Pyomo
TransformationFactory
(default = “dae.finite_difference”)</li>
<li><strong>- scheme to use when transformating domain.</strong> (<em>transformation_scheme</em>) – See Pyomo documentation for supported
schemes (default=”BACKWARD”)</li>
<li><strong>- number of finite elements to use in</strong> (<em>finite_elements</em>) – transformation (equivalent to Pyomo nfe argument,
default = 10)</li>
<li><strong>- number of collocation points to use</strong><strong> (</strong><strong>equivalent</strong> (<em>collocation_points</em>) – to Pyomo ncp argument, default = 3)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.build">
<code class="descname">build</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Build method for ControlVolume1DBlock blocks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.initialize">
<code class="descname">initialize</code><span class="sig-paren">(</span><em>state_args=None</em>, <em>outlvl=0</em>, <em>optarg=None</em>, <em>solver='ipopt'</em>, <em>hold_state=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialisation routine for 1D control volume (default solver ipopt)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>state_args</strong> – a dict of arguments to be passed to the property
package(s) to provide an initial state for
initialization (see documentation of the specific
property package) (default = {}).</li>
<li><strong>outlvl</strong> – sets output level of initialisation routine. <strong>Valid
values:</strong> <strong>0</strong> - no output (default), <strong>1</strong> - return
solver state for each step in routine, <strong>2</strong> - include
solver output infomation (tee=True)</li>
<li><strong>optarg</strong> – solver options dictionary object (default=None)</li>
<li><strong>solver</strong> – str indicating whcih solver to use during
initialization (default = ‘ipopt’)</li>
<li><strong>hold_state</strong> – flag indicating whether the initialization routine
should unfix any state variables fixed during
initialization, <strong>default</strong> - True. <strong>Valid values:</strong>
<strong>True</strong> - states variables are not unfixed, and a dict of
returned containing flags for which states were fixed
during initialization, <strong>False</strong> - state variables are
unfixed after initialization by calling the release_state
method.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">If hold_states is True, returns a dict containing flags for which
states were fixed during initialization.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.model_check">
<code class="descname">model_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.model_check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.model_check" title="Permalink to this definition">¶</a></dt>
<dd><p>This method executes the model_check methods on the associated state
blocks (if they exist). This method is generally called by a unit model
as part of the unit’s model_check method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>None</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.control_volume1d.ControlVolume1DBlockData.release_state">
<code class="descname">release_state</code><span class="sig-paren">(</span><em>flags</em>, <em>outlvl=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/control_volume1d.html#ControlVolume1DBlockData.release_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.control_volume1d.ControlVolume1DBlockData.release_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to release state variables fixed during initialisation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>flags</strong> – dict containing information of which state variables
were fixed during initialization, and should now be
unfixed. This dict is returned by initialize if
hold_state = True.</li>
<li><strong>outlvl</strong> – sets output level of logging</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<div class="section" id="controlvolume1dblock-equations">
<h2><a class="toc-backref" href="#id2">ControlVolume1DBlock Equations</a><a class="headerlink" href="#controlvolume1dblock-equations" title="Permalink to this headline">¶</a></h2>
<p>This section documents the variables and constraints created by each of the methods provided by the ControlVolume0DBlock class.</p>
<ul class="simple">
<li><span class="math notranslate nohighlight">\(t\)</span> indicates time index</li>
<li><span class="math notranslate nohighlight">\(x\)</span> indicates spatial (length) index</li>
<li><span class="math notranslate nohighlight">\(p\)</span> indicates phase index</li>
<li><span class="math notranslate nohighlight">\(j\)</span> indicates component index</li>
<li><span class="math notranslate nohighlight">\(e\)</span> indicates element index</li>
<li><span class="math notranslate nohighlight">\(r\)</span> indicates reaction name index</li>
</ul>
<p>Most terms within the balance equations written by ControlVolume1DBlock are on a basis of per unit length (e.g. <span class="math notranslate nohighlight">\(mol/m \cdot s\)</span>).</p>
<div class="section" id="add-geometry">
<h3>add_geometry<a class="headerlink" href="#add-geometry" title="Permalink to this headline">¶</a></h3>
<p>The add_geometry method creates the normalized length domain for the control volume (or a reference to an external domain). All constraints in ControlVolume1DBlock assume a normalized length domain, with values between 0 and 1.</p>
<p>This method also adds variables and constraints to describe the geometry of the control volume. ControlVolume1DBlock does not support varying dimensions of the control volume with time at this stage.</p>
<p><strong>Variables</strong></p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="33%" />
<col width="13%" />
<col width="13%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable Name</th>
<th class="head">Symbol</th>
<th class="head">Indices</th>
<th class="head">Conditions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>length_domain</td>
<td><span class="math notranslate nohighlight">\(x\)</span></td>
<td>None</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>volume</td>
<td><span class="math notranslate nohighlight">\(V\)</span></td>
<td>None</td>
<td>None</td>
</tr>
<tr class="row-even"><td>area</td>
<td><span class="math notranslate nohighlight">\(A\)</span></td>
<td>None</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>length</td>
<td><span class="math notranslate nohighlight">\(L\)</span></td>
<td>None</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Constraints</strong></p>
<p><cite>geometry_constraint</cite>:</p>
<div class="math notranslate nohighlight">
\[V = A \times L\]</div>
</div>
<div class="section" id="add-phase-component-balances">
<h3>add_phase_component_balances<a class="headerlink" href="#add-phase-component-balances" title="Permalink to this headline">¶</a></h3>
<p>Material balances are written for each component in each phase (e.g. separate balances for liquid water and steam). Physical property packages may include information to indicate that certain species do not appear in all phases, and material balances will not be written in these cases (if <cite>has_holdup</cite> is True holdup terms will still appear for these species, however these will be set to 0).</p>
<p><strong>Variables</strong></p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="31%" />
<col width="19%" />
<col width="13%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable Name</th>
<th class="head">Symbol</th>
<th class="head">Indices</th>
<th class="head">Conditions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>material_holdup</td>
<td><span class="math notranslate nohighlight">\(M_{t,x,p,j}\)</span></td>
<td>t, x, p, j</td>
<td>has_holdup = True</td>
</tr>
<tr class="row-odd"><td>phase_fraction</td>
<td><span class="math notranslate nohighlight">\(\phi_{t,x,p}\)</span></td>
<td>t, x, p</td>
<td>has_holdup = True</td>
</tr>
<tr class="row-even"><td>material_accumulation</td>
<td><span class="math notranslate nohighlight">\(\frac{\partial M_{t,x,p,j}}{\partial t}\)</span></td>
<td>t, x, p, j</td>
<td>dynamic = True</td>
</tr>
<tr class="row-odd"><td>_flow_terms</td>
<td><span class="math notranslate nohighlight">\(F_{t, x, p, j}\)</span></td>
<td>t, x, p, j</td>
<td>None</td>
</tr>
<tr class="row-even"><td>material_flow_dx</td>
<td><span class="math notranslate nohighlight">\(\frac{\partial F_{t,x,p,j}}{\partial x}\)</span></td>
<td>t, x, p, j</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>rate_reaction_generation</td>
<td><span class="math notranslate nohighlight">\(N_{kinetic,t,x,p,j}\)</span></td>
<td>t, x, p ,j</td>
<td>has_rate_reactions = True</td>
</tr>
<tr class="row-even"><td>rate_reaction_extent</td>
<td><span class="math notranslate nohighlight">\(X_{kinetic,t,x,r}\)</span></td>
<td>t, x, r</td>
<td>has_rate_reactions = True</td>
</tr>
<tr class="row-odd"><td>equilibrium_reaction_generation</td>
<td><span class="math notranslate nohighlight">\(N_{equilibrium,t,x,p,j}\)</span></td>
<td>t, x, p ,j</td>
<td>has_equilibrium_reactions = True</td>
</tr>
<tr class="row-even"><td>equilibrium_reaction_extent</td>
<td><span class="math notranslate nohighlight">\(X_{equilibrium,t,x,r}\)</span></td>
<td>t, x, r</td>
<td>has_equilibrium_reactions = True</td>
</tr>
<tr class="row-odd"><td>phase_equilibrium_generation</td>
<td><span class="math notranslate nohighlight">\(N_{pe,t,x,p,j}\)</span></td>
<td>t, x, p ,j</td>
<td>has_phase_equilibrium = True</td>
</tr>
<tr class="row-even"><td>mass_transfer_term</td>
<td><span class="math notranslate nohighlight">\(N_{transfer,t,x,p,j}\)</span></td>
<td>t, x, p ,j</td>
<td>has_mass_transfer = True</td>
</tr>
</tbody>
</table>
<p><strong>Constraints</strong></p>
<p><cite>material_balances(t, x, p, j)</cite>:</p>
<div class="math notranslate nohighlight">
\[L \times \frac{\partial M_{t, x, p, j}}{\partial t} = fd \times \frac{\partial F_{t, x, p, j}}{\partial x} + L \times N_{kinetic, t, x, p, j} + L \times N_{equilibrium, t, x, p, j} + L \times N_{pe, t, x, p, j} + L \times N_{transfer, t, x, p, j} + L \times N_{custom, t, x, p, j}\]</div>
<p><span class="math notranslate nohighlight">\(fd\)</span> is a flow direction term, which allows for material flow to be defined in either direction. If material flow is defined as <cite>forward</cite>, <span class="math notranslate nohighlight">\(fd = -1\)</span>, otherwise <span class="math notranslate nohighlight">\(fd = 1\)</span>.</p>
<p>The <span class="math notranslate nohighlight">\(N_{custom, t, x, p, j}\)</span> term allows the user to provide custom terms (variables or expressions) in both mass and molar basis which will be added into the material balances, which will be converted as necessary to the same basis as the material balance (by multiplying or dividing by the component molecular weight). The basis of the material balance is determined by the physical property package, and if undefined (or not mass or mole basis), an Exception will be returned.</p>
<p><cite>material_flow_linking_constraints(t, x, p, j)</cite>:</p>
<p>This constraint is an internal constraint used to link the extensive material flow terms in the StateBlocks into a single indexed variable. This is required as Pyomo.DAE requires a single indexed variable to create the associated DerivativeVars and their numerical expansions.</p>
<p>If <cite>has_holdup</cite> is True, <cite>material_holdup_calculation(t, x, p, j)</cite>:</p>
<div class="math notranslate nohighlight">
\[M_{t, x, p, j} = \rho_{t, x, p, j} \times A \times \phi_{t, x, p}\]</div>
<p>where <span class="math notranslate nohighlight">\(\rho_{t, x, p ,j}\)</span> is the density of component <span class="math notranslate nohighlight">\(j\)</span> in phase <span class="math notranslate nohighlight">\(p\)</span> at time <span class="math notranslate nohighlight">\(t\)</span> and location <span class="math notranslate nohighlight">\(x\)</span>.</p>
<p>If <cite>dynamic</cite> is True:</p>
<p>Numerical discretization of the derivative terms, <span class="math notranslate nohighlight">\(\frac{\partial M_{t,x,p,j}}{\partial t}\)</span>, will be performed by Pyomo.DAE.</p>
<p>If <cite>has_rate_reactions</cite> is True, <cite>rate_reaction_stoichiometry_constraint(t, x, p, j)</cite>:</p>
<div class="math notranslate nohighlight">
\[N_{kinetic, t, x, p, j} = \alpha_{r, p, j} \times X_{kinetic, t, x, r}\]</div>
<p>where <span class="math notranslate nohighlight">\(\alpha_{r, p. j}\)</span> is the stoichiometric coefficient of component <span class="math notranslate nohighlight">\(j\)</span> in phase <span class="math notranslate nohighlight">\(p\)</span> for reaction <span class="math notranslate nohighlight">\(r\)</span> (as defined in the PhysicalParameterBlock).</p>
<p>If <cite>has_equilibrium_reactions</cite> argument is True, <cite>equilibrium_reaction_stoichiometry_constraint(t, x, p, j)</cite>:</p>
<div class="math notranslate nohighlight">
\[N_{equilibrium, t, x, p, j} = \alpha_{r, p, j} \times X_{equilibrium, t, x, r}\]</div>
<p>where <span class="math notranslate nohighlight">\(\alpha_{r, p. j}\)</span> is the stoichiometric coefficient of component <span class="math notranslate nohighlight">\(j\)</span> in phase <span class="math notranslate nohighlight">\(p\)</span> for reaction <span class="math notranslate nohighlight">\(r\)</span> (as defined in the PhysicalParameterBlock).</p>
</div>
<div class="section" id="add-total-component-balances">
<h3>add_total_component_balances<a class="headerlink" href="#add-total-component-balances" title="Permalink to this headline">¶</a></h3>
<p>Material balances are written for each component across all phases (e.g. one balance for both liquid water and steam). Physical property packages may include information to indicate that certain species do not appear in all phases, and material balances will not be written in these cases (if <cite>has_holdup</cite> is True holdup terms will still appear for these species, however these will be set to 0).</p>
<p><strong>Variables</strong></p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="31%" />
<col width="19%" />
<col width="13%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable Name</th>
<th class="head">Symbol</th>
<th class="head">Indices</th>
<th class="head">Conditions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>material_holdup</td>
<td><span class="math notranslate nohighlight">\(M_{t,x,p,j}\)</span></td>
<td>t, x, p, j</td>
<td>has_holdup = True</td>
</tr>
<tr class="row-odd"><td>phase_fraction</td>
<td><span class="math notranslate nohighlight">\(\phi_{t,x,p}\)</span></td>
<td>t, x, p</td>
<td>has_holdup = True</td>
</tr>
<tr class="row-even"><td>material_accumulation</td>
<td><span class="math notranslate nohighlight">\(\frac{\partial M_{t,x,p,j}}{\partial t}\)</span></td>
<td>t, x, p, j</td>
<td>dynamic = True</td>
</tr>
<tr class="row-odd"><td>_flow_terms</td>
<td><span class="math notranslate nohighlight">\(F_{t, x, p, j}\)</span></td>
<td>t, x, p, j</td>
<td>None</td>
</tr>
<tr class="row-even"><td>material_flow_dx</td>
<td><span class="math notranslate nohighlight">\(\frac{\partial F_{t,x,p,j}}{\partial x}\)</span></td>
<td>t, x, p, j</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>rate_reaction_generation</td>
<td><span class="math notranslate nohighlight">\(N_{kinetic,t,x,p,j}\)</span></td>
<td>t, x, p ,j</td>
<td>has_rate_reactions = True</td>
</tr>
<tr class="row-even"><td>rate_reaction_extent</td>
<td><span class="math notranslate nohighlight">\(X_{kinetic,t,x,r}\)</span></td>
<td>t, x, r</td>
<td>has_rate_reactions = True</td>
</tr>
<tr class="row-odd"><td>equilibrium_reaction_generation</td>
<td><span class="math notranslate nohighlight">\(N_{equilibrium,t,x,p,j}\)</span></td>
<td>t, x, p ,j</td>
<td>has_equilibrium_reactions = True</td>
</tr>
<tr class="row-even"><td>equilibrium_reaction_extent</td>
<td><span class="math notranslate nohighlight">\(X_{equilibrium,t,x,r}\)</span></td>
<td>t, x, r</td>
<td>has_equilibrium_reactions = True</td>
</tr>
<tr class="row-odd"><td>mass_transfer_term</td>
<td><span class="math notranslate nohighlight">\(N_{transfer,t,x,p,j}\)</span></td>
<td>t, x, p ,j</td>
<td>has_mass_transfer = True</td>
</tr>
</tbody>
</table>
<p><strong>Constraints</strong></p>
<p><cite>material_balances(t, x, p, j)</cite>:</p>
<div class="math notranslate nohighlight">
\[L \times \sum_p{\frac{\partial M_{t, x, p, j}}{\partial t}} = fd \times \sum{\frac{\partial F_{t, x, p, j}}{\partial x}} + L \times \sum_p{N_{kinetic, t, x, p, j}} + L \times \sum_p{N_{equilibrium, t, x, p, j}} + L \times \sum_p{N_{transfer, t, x, p, j}} + L \times N_{custom, t, x, j}\]</div>
<p><span class="math notranslate nohighlight">\(fd\)</span> is a flow direction term, which allows for material flow to be defined in either direction. If material flow is defined as <cite>forward</cite>, <span class="math notranslate nohighlight">\(fd = -1\)</span>, otherwise <span class="math notranslate nohighlight">\(fd = 1\)</span>.</p>
<p>The <span class="math notranslate nohighlight">\(N_{custom, t, x, j}\)</span> term allows the user to provide custom terms (variables or expressions) in both mass and molar basis which will be added into the material balances, which will be converted as necessary to the same basis as the material balance (by multiplying or dividing by the component molecular weight). The basis of the material balance is determined by the physical property package, and if undefined (or not mass or mole basis), an Exception will be returned.</p>
<p><cite>material_flow_linking_constraints(t, x, p, j)</cite>:</p>
<p>This constraint is an internal constraint used to link the extensive material flow terms in the StateBlocks into a single indexed variable. This is required as Pyomo.DAE requires a single indexed variable to create the associated DerivativeVars and their numerical expansions.</p>
<p>If <cite>has_holdup</cite> is True, <cite>material_holdup_calculation(t, x, p, j)</cite>:</p>
<div class="math notranslate nohighlight">
\[M_{t, x, p, j} = \rho_{t, x, p, j} \times A \times \phi_{t, x, p}\]</div>
<p>where <span class="math notranslate nohighlight">\(\rho_{t, x, p ,j}\)</span> is the density of component <span class="math notranslate nohighlight">\(j\)</span> in phase <span class="math notranslate nohighlight">\(p\)</span> at time <span class="math notranslate nohighlight">\(t\)</span> and location <span class="math notranslate nohighlight">\(x\)</span>.</p>
<p>If <cite>dynamic</cite> is True:</p>
<p>Numerical discretization of the derivative terms, <span class="math notranslate nohighlight">\(\frac{\partial M_{t,x,p,j}}{\partial t}\)</span>, will be performed by Pyomo.DAE.</p>
<p>If <cite>has_rate_reactions</cite> is True, <cite>rate_reaction_stoichiometry_constraint(t, x, p, j)</cite>:</p>
<div class="math notranslate nohighlight">
\[N_{kinetic, t, x, p, j} = \alpha_{r, p, j} \times X_{kinetic, t, x, r}\]</div>
<p>where <span class="math notranslate nohighlight">\(\alpha_{r, p. j}\)</span> is the stoichiometric coefficient of component <span class="math notranslate nohighlight">\(j\)</span> in phase <span class="math notranslate nohighlight">\(p\)</span> for reaction <span class="math notranslate nohighlight">\(r\)</span> (as defined in the PhysicalParameterBlock).</p>
<p>If <cite>has_equilibrium_reactions</cite> argument is True, <cite>equilibrium_reaction_stoichiometry_constraint(t, x, p, j)</cite>:</p>
<div class="math notranslate nohighlight">
\[N_{equilibrium, t, x, p, j} = \alpha_{r, p, j} \times X_{equilibrium, t, x, r}\]</div>
<p>where <span class="math notranslate nohighlight">\(\alpha_{r, p. j}\)</span> is the stoichiometric coefficient of component <span class="math notranslate nohighlight">\(j\)</span> in phase <span class="math notranslate nohighlight">\(p\)</span> for reaction <span class="math notranslate nohighlight">\(r\)</span> (as defined in the PhysicalParameterBlock).</p>
</div>
<div class="section" id="add-total-element-balances">
<h3>add_total_element_balances<a class="headerlink" href="#add-total-element-balances" title="Permalink to this headline">¶</a></h3>
<p>Material balances are written for each element in the mixture.</p>
<p><strong>Variables</strong></p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="31%" />
<col width="19%" />
<col width="13%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable Name</th>
<th class="head">Symbol</th>
<th class="head">Indices</th>
<th class="head">Conditions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>element_holdup</td>
<td><span class="math notranslate nohighlight">\(M_{t,x,e}\)</span></td>
<td>t, x, e</td>
<td>has_holdup = True</td>
</tr>
<tr class="row-odd"><td>phase_fraction</td>
<td><span class="math notranslate nohighlight">\(\phi_{t,x,p}\)</span></td>
<td>t, x, p</td>
<td>has_holdup = True</td>
</tr>
<tr class="row-even"><td>element_accumulation</td>
<td><span class="math notranslate nohighlight">\(\frac{\partial M_{t,x,e}}{\partial t}\)</span></td>
<td>t, x, e</td>
<td>dynamic = True</td>
</tr>
<tr class="row-odd"><td>elemental_mass_transfer_term</td>
<td><span class="math notranslate nohighlight">\(N_{transfer,t,x,e}\)</span></td>
<td>t, x, e</td>
<td>has_mass_transfer = True</td>
</tr>
<tr class="row-even"><td>elemental_flow_term</td>
<td><span class="math notranslate nohighlight">\(F_{t,x,e}\)</span></td>
<td>t, x, e</td>
<td>None</td>
</tr>
</tbody>
</table>
<p><strong>Constraints</strong></p>
<p><cite>elemental_flow_constraint(t, x, e)</cite>:</p>
<div class="math notranslate nohighlight">
\[F_{t,x,e} = \sum_p{\sum_j{F_{t,x,p,j} \times n_{j, e}}}\]</div>
<p>where <span class="math notranslate nohighlight">\(n_{j, e}\)</span> is the number of moles of element <span class="math notranslate nohighlight">\(e\)</span> in component <span class="math notranslate nohighlight">\(j\)</span>.</p>
<p><cite>element_balances(t, x, e)</cite>:</p>
<div class="math notranslate nohighlight">
\[L \times \frac{\partial M_{t, x, e}}{\partial t} = fd \times \frac{\partial F_{t, x, e}}{\partial x} + L \times N_{transfer, t, p, j} + L \times N_{custom, t, e}\]</div>
<p><span class="math notranslate nohighlight">\(fd\)</span> is a flow direction term, which allows for material flow to be defined in either direction. If material flow is defined as <cite>forward</cite>, <span class="math notranslate nohighlight">\(fd = -1\)</span>, otherwise <span class="math notranslate nohighlight">\(fd = 1\)</span>.</p>
<p>The <span class="math notranslate nohighlight">\(N_{custom, t, x, e}\)</span> term allows the user to provide custom terms (variables or expressions) which will be added into the material balances.</p>
<p>If <cite>has_holdup</cite> is True, <cite>elemental_holdup_calculation(t, x, e)</cite>:</p>
<div class="math notranslate nohighlight">
\[M_{t, x, e} = \rho_{t, x, p, j} \times A \times \phi_{t, x, p}\]</div>
<p>where <span class="math notranslate nohighlight">\(\rho_{t, x, p ,j}\)</span> is the density of component <span class="math notranslate nohighlight">\(j\)</span> in phase <span class="math notranslate nohighlight">\(p\)</span> at time <span class="math notranslate nohighlight">\(t\)</span> and location <span class="math notranslate nohighlight">\(x\)</span>.</p>
<p>If <cite>dynamic</cite> is True:</p>
<p>Numerical discretization of the derivative terms, <span class="math notranslate nohighlight">\(\frac{\partial M_{t,x,p,j}}{\partial t}\)</span>, will be performed by Pyomo.DAE.</p>
</div>
<div class="section" id="add-total-enthalpy-balances">
<h3>add_total_enthalpy_balances<a class="headerlink" href="#add-total-enthalpy-balances" title="Permalink to this headline">¶</a></h3>
<p>A single enthalpy balance is written for the entire mixture at each point in the spatial domain.</p>
<p><strong>Variables</strong></p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="31%" />
<col width="19%" />
<col width="13%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable Name</th>
<th class="head">Symbol</th>
<th class="head">Indices</th>
<th class="head">Conditions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>enthalpy_holdup</td>
<td><span class="math notranslate nohighlight">\(E_{t,x,p}\)</span></td>
<td>t, x, p</td>
<td>has_holdup = True</td>
</tr>
<tr class="row-odd"><td>phase_fraction</td>
<td><span class="math notranslate nohighlight">\(\phi_{t,x,p}\)</span></td>
<td>t, x, p</td>
<td>has_holdup = True</td>
</tr>
<tr class="row-even"><td>enthalpy_accumulation</td>
<td><span class="math notranslate nohighlight">\(\frac{\partial E_{t,x,p}}{\partial t}\)</span></td>
<td>t, x, p</td>
<td>dynamic = True</td>
</tr>
<tr class="row-odd"><td>_enthalpy_flow</td>
<td><span class="math notranslate nohighlight">\(H_{t,x,p}\)</span></td>
<td>t, x, p</td>
<td>None</td>
</tr>
<tr class="row-even"><td>enthalpy_flow_dx</td>
<td><span class="math notranslate nohighlight">\(\frac{\partial H_{t,x,p}}{\partial x}\)</span></td>
<td>t, x, p</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>heat</td>
<td><span class="math notranslate nohighlight">\(Q_{t,x}\)</span></td>
<td>t, x</td>
<td>has_heat_transfer = True</td>
</tr>
<tr class="row-even"><td>work</td>
<td><span class="math notranslate nohighlight">\(W_{t,x}\)</span></td>
<td>t, x</td>
<td>has_work_transfer = True</td>
</tr>
</tbody>
</table>
<p><strong>Expressions</strong></p>
<p><cite>heat_of_reaction(t, x)</cite>:</p>
<div class="math notranslate nohighlight">
\[Q_{rxn, t, x} = sum_r{X_{kinetic, t, x, r} \times \Delta H_{rxn, r}} + sum_r{X_{equilibrium, t, x, r} \times \Delta H_{rxn, r}}\]</div>
<p>where <span class="math notranslate nohighlight">\(Q_{rxn, t, x}\)</span> is the total enthalpy released by both kinetic and equilibrium reactions, and <span class="math notranslate nohighlight">\(\Delta H_{rxn, r}\)</span> is the specific heat of reaction for reaction <span class="math notranslate nohighlight">\(r\)</span>.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="45%" />
<col width="27%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter Name</th>
<th class="head">Symbol</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>scaling_factor_energy</td>
<td><span class="math notranslate nohighlight">\(s_{energy}\)</span></td>
<td>1E-6</td>
</tr>
</tbody>
</table>
<p><strong>Constraints</strong></p>
<p><cite>enthalpy_balance(t)</cite>:</p>
<div class="math notranslate nohighlight">
\[s_{energy} \times L \times \sum_p{\frac{\partial E_{t, x, p}}{\partial t}} = s_{energy} \times fd \ times \sum_p{\frac{\partial H_{t, x, p}}{\partial x}} + s_{energy} \times L \times Q_{t,x} + s_{energy} \times L \times W_{t,x} + s_{energy} \times L \times Q_{rxn, t, x} + s_{energy} \times L \times E_{custom, t, x}\]</div>
<p><span class="math notranslate nohighlight">\(fd\)</span> is a flow direction term, which allows for material flow to be defined in either direction. If material flow is defined as <cite>forward</cite>, <span class="math notranslate nohighlight">\(fd = -1\)</span>, otherwise <span class="math notranslate nohighlight">\(fd = 1\)</span>.</p>
<p>The <span class="math notranslate nohighlight">\(E_{custom, t, x}\)</span> term allows the user to provide custom terms  which will be added into the energy balance.</p>
<p><cite>enthalpy_flow_linking_constraints(t, x, p)</cite>:</p>
<p>This constraint is an internal constraint used to link the extensive enthalpy flow terms in the StateBlocks into a single indexed variable. This is required as Pyomo.DAE requires a single indexed variable to create the associated DerivativeVars and their numerical expansions.</p>
<p>If <cite>has_holdup</cite> is True, <cite>enthalpy_holdup_calculation(t, x, p)</cite>:</p>
<div class="math notranslate nohighlight">
\[E_{t, x, p} = h_{t, x, p} \times A \times \phi_{t, x, p}\]</div>
<p>where <span class="math notranslate nohighlight">\(h_{t, x, p}\)</span> is the enthalpy density (specific enthalpy) of phase <span class="math notranslate nohighlight">\(p\)</span> at time <span class="math notranslate nohighlight">\(t\)</span> and location <span class="math notranslate nohighlight">\(x\)</span>.</p>
<p>If <cite>dynamic</cite> is True:</p>
<p>Numerical discretization of the derivative terms, <span class="math notranslate nohighlight">\(\frac{\partial E_{t,x,p}}{\partial t}\)</span>, will be performed by Pyomo.DAE.</p>
</div>
<div class="section" id="add-total-pressure-balances">
<h3>add_total_pressure_balances<a class="headerlink" href="#add-total-pressure-balances" title="Permalink to this headline">¶</a></h3>
<p>A single pressure balance is written for the entire mixture at all points in the spatial domain.</p>
<p><strong>Variables</strong></p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="31%" />
<col width="19%" />
<col width="13%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable Name</th>
<th class="head">Symbol</th>
<th class="head">Indices</th>
<th class="head">Conditions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pressure</td>
<td><span class="math notranslate nohighlight">\(P_{t,x}\)</span></td>
<td>t, x</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>pressure_dx</td>
<td><span class="math notranslate nohighlight">\(\frac{\partial P_{t,x}}{\partial x}\)</span></td>
<td>t, x</td>
<td>None</td>
</tr>
<tr class="row-even"><td>deltaP</td>
<td><span class="math notranslate nohighlight">\(\Delta P_{t,x}\)</span></td>
<td>t, x</td>
<td>has_pressure_change = True</td>
</tr>
</tbody>
</table>
<p><strong>Parameters</strong></p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="45%" />
<col width="27%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter Name</th>
<th class="head">Symbol</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>scaling_factor_pressure</td>
<td><span class="math notranslate nohighlight">\(s_{pressure}\)</span></td>
<td>1E-4</td>
</tr>
</tbody>
</table>
<p><strong>Constraints</strong></p>
<p><cite>pressure_balance(t, x)</cite>:</p>
<div class="math notranslate nohighlight">
\[0 = s_{pressure} \times fd \times \frac{\partial P_{t,x}}{\partial x} + s_{pressure} \times L \times \Delta P_{t,x} + s_{pressure} \times L \times \Delta P_{custom, t, x}\]</div>
<p><span class="math notranslate nohighlight">\(fd\)</span> is a flow direction term, which allows for material flow to be defined in either direction. If material flow is defined as <cite>forward</cite>, <span class="math notranslate nohighlight">\(fd = -1\)</span>, otherwise <span class="math notranslate nohighlight">\(fd = 1\)</span>.</p>
<p>The <span class="math notranslate nohighlight">\(\Delta P_{custom, t, x}\)</span> term allows the user to provide custom terms  which will be added into the pressure balance.</p>
<p><cite>pressure_linking_constraint(t, x)</cite>:</p>
<p>This constraint is an internal constraint used to link the pressure terms in the StateBlocks into a single indexed variable. This is required as Pyomo.DAE requires a single indexed variable to create the associated DerivativeVars and their numerical expansions.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="util/index.html" class="btn btn-neutral float-right" title="Utility Methods" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="control_volume_0d.html" class="btn btn-neutral float-left" title="0D Control Volume Class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019, David Miller et al.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>